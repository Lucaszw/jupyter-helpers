environment:
  global:
    CMD_IN_ENV: "cmd /E:ON /V:ON /C .\\continuous-integration\\appveyor\\run_with_env.cmd"

version: '1.0.{build}'

install:
  - set PATH=C:\Miniconda;C:\Miniconda\Scripts;%PATH%
  - "python --version"
  - "conda --version"
  - "conda config --add channels conda-forge"
  - "conda config --add channels wheeler-microfluidics"
  - "conda install -y -q jupyter"
  - "conda install -y -q nose"
  - "conda install -y -q conda-build"
  - "conda install -y -q path_helpers"

build: off
test_script:
  - "conda-build .conda-recipe"
  - "python continuous-integration\move-conda-package.py .conda-recipe"
  - "nosetests -vv"

artifacts:
  # Archive the generated conda package in the ci.appveyor.com build report.
  - path: '*.tar.bz2'
